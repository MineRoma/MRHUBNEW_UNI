local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer

-- –ó–∞–≥—Ä—É–∑–∫–∞ Rayfield
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/MineRoma/MRHUBNEW_UNI/refs/heads/main/guimod'))()

-- –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
local Window = Rayfield:CreateWindow({
   Name = "MR HUB UNIVERSAL",
   LoadingTitle = "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...",
   LoadingSubtitle = "by MineRoma Team",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "MR_HUB_UNI",
      FileName = "Config"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },
   KeySystem = false,
})

-- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
local MainTab = Window:CreateTab("–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏", 4483362458)
local PlayerTab = Window:CreateTab("–ò–≥—Ä–æ–∫", 4483362458)
local TeleportTab = Window:CreateTab("–¢–µ–ª–µ–ø–æ—Ä—Ç", 4483362458)
local SettingsTab = Window:CreateTab("–ù–∞—Å—Ç—Ä–æ–π–∫–∏", 4483362458)

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local FLYING = false
local QEfly = true
local flyKeyDown, flyKeyUp
local flyFlingEnabled = false
local flyFlingConnection = nil
local lastFlingTime = {}
local currentWalkSpeed = 16
local originalWalkSpeed = 16
local currentJumpPower = 50
local originalJumpPower = 50
local walkFlingEnabled = false
local walkFlingConnection = nil
local IgnoredPlayers = {}
local Noclip = false
local FlySpeed = 1
local originalFlingPosition = nil
local isFlinging = false
local selectedPlayerForTP = nil
local walkSpeedEnforcerConnection = nil
local antiAFKEnabled = false
local antiAFKConnection = nil

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ä–Ω–µ–≤–æ–π —á–∞—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
local function getRoot(char)
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
    return root
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Humanoid
local function getHumanoid(char)
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    return humanoid
end

-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å WalkSpeed
local function updateWalkSpeed()
    if player.Character then
        local humanoid = getHumanoid(player.Character)
        if humanoid then
            humanoid.WalkSpeed = currentWalkSpeed

            if walkSpeedEnforcerConnection then
                walkSpeedEnforcerConnection:Disconnect()
                walkSpeedEnforcerConnection = nil
            end

            walkSpeedEnforcerConnection = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                if humanoid.WalkSpeed ~= currentWalkSpeed and currentWalkSpeed ~= 0 then
                    humanoid.WalkSpeed = currentWalkSpeed
                end
            end)
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è JumpPower
local function updateJumpPower()
    if player.Character then
        local humanoid = getHumanoid(player.Character)
        if humanoid then
            humanoid.JumpPower = currentJumpPower
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –∞–Ω—Ç–∏-–ê–§–ö
local function ToggleAntiAFK()
    antiAFKEnabled = not antiAFKEnabled
    
    if antiAFKEnabled then
        antiAFKConnection = RunService.Heartbeat:Connect(function()
            if not antiAFKEnabled then return end
            if player.Character then
                local humanoid = getHumanoid(player.Character)
                if humanoid then
                    -- –ú–µ–Ω—è–µ–º –Ω–µ–±–æ–ª—å—à–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è —á—Ç–æ–±—ã –Ω–µ –∫–∏–∫–∞–ª–æ –∑–∞ –ê–§–ö
                    humanoid:Move(Vector3.new(
                        math.random(-10, 10) * 0.01,
                        0,
                        math.random(-10, 10) * 0.01
                    ))
                end
            end
        end)
        Rayfield:Notify({
            Title = "ANTI AFK",
            Content = "–ê–Ω—Ç–∏-–ê–§–ö –≤–∫–ª—é—á–µ–Ω!",
            Duration = 3,
            Image = 4483362458,
        })
    else
        if antiAFKConnection then
            antiAFKConnection:Disconnect()
            antiAFKConnection = nil
        end
        Rayfield:Notify({
            Title = "ANTI AFK",
            Content = "–¢—ã –≤—ã—Ä—É–±–∏–ª aAti Afk",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞ –≤–ø–µ—Ä–µ–¥
local function TPForward()
    if not player.Character then return end
    
    local rootPart = getRoot(player.Character)
    if not rootPart then return end
    
    local camera = workspace.CurrentCamera
    local lookVector = camera.CFrame.LookVector
   
    local horizontalLook = Vector3.new(lookVector.X, 0, lookVector.Z).Unit
    local newPosition = rootPart.Position + (horizontalLook * 40)
    newPosition = Vector3.new(newPosition.X, rootPart.Position.Y, newPosition.Z)
    
    rootPart.CFrame = CFrame.new(newPosition) * (rootPart.CFrame - rootPart.CFrame.Position)
    Rayfield:Notify({
        Title = "–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è",
        Content = "–¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤–ø–µ—Ä–µ–¥ –Ω–∞ 40 studs",
        Duration = 3,
        Image = 4483362458,
    })
end

-- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞ –∫ –∏–≥—Ä–æ–∫—É
local function TPToPlayer(targetPlayer)
    if not targetPlayer then
        Rayfield:Notify({
            Title = "–û—à–∏–±–∫–∞",
            Content = "–ò–≥—Ä–æ–∫ –Ω–µ –≤—ã–±—Ä–∞–Ω!",
            Duration = 3,
            Image = 4483362458,
        })
        return
    end
    
    if not player.Character then return end
    
    if not targetPlayer.Character then
        Rayfield:Notify({
            Title = "–û—à–∏–±–∫–∞",
            Content = "–£ —á–µ–ª–∞ –Ω–µ—Ç—É —Ö—É–º–∞–Ω—Ä–æ–π–¥–∞ –∏–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞!",
            Duration = 3,
            Image = 4483362458,
        })
        return
    end
    
    local targetRoot = getRoot(targetPlayer.Character)
    local myRoot = getRoot(player.Character)
    
    if not targetRoot or not myRoot then return end
    
    local offset = CFrame.new(0, 0, 5)
    myRoot.CFrame = targetRoot.CFrame * offset
    
    Rayfield:Notify({
        Title = "TP",
        Content = "–¢–ü –ö: " .. targetPlayer.Name,
        Duration = 3,
        Image = 4483362458,
    })
end

-- –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
local function ResetCharacter()
    if player.Character then
        player.Character:BreakJoints()
        Rayfield:Notify({
            Title = "–°—É–∏—Ü–∏–¥",
            Content = "–¢—ã —É–±–∏–ª —Å–µ–±—è!",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
local function LeaveGame()
    game:GetService("TeleportService"):Teleport(game.PlaceId)
end

-- –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —Å–µ—Ä–≤–µ—Ä–∞
local function ServerHop()
    local placeId = game.PlaceId
    local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Asc&limit=100"))
    
    for _, server in ipairs(servers.data) do
        if server.playing < server.maxPlayers and server.id ~= game.JobId then
            TeleportService:TeleportToPlaceInstance(placeId, server.id)
            return
        end
    end
    
    Rayfield:Notify({
        Title = "–û—à–∏–±–∫–∞",
        Content = "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–µ—Ä–≤–µ—Ä!",
        Duration = 3,
        Image = 4483362458,
    })
end

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª–µ—Ç–∞
local function sFLY()
    local plr = player
    local char = plr.Character
    if not char then return end
    
    local humanoid = getHumanoid(char)
    if not humanoid then return end

    if flyKeyDown or flyKeyUp then
        flyKeyDown:Disconnect()
        flyKeyUp:Disconnect()
    end

    local T = getRoot(char)
    if not T then return end
   
    local CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
    local lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
    local SPEED = 0

    local function FLY()
        FLYING = true
        local BG = Instance.new('BodyGyro')
        local BV = Instance.new('BodyVelocity')
      
        BG.P = 9e4
        BG.Parent = T
        BV.Parent = T
        BG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        BG.CFrame = T.CFrame
        BV.Velocity = Vector3.new(0, 0, 0)
        BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        
        spawn(function()
            repeat wait()
                if not FLYING or not char or not T then break end
                
                local camera = workspace.CurrentCamera
                if humanoid then
                    humanoid.PlatformStand = true
                end

                if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0 then
                    SPEED = 50 * FlySpeed
                elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0) and SPEED ~= 0 then
                    SPEED = 0
                end
                
                if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 or (CONTROL.Q + CONTROL.E) ~= 0 then
                    BV.Velocity = ((camera.CFrame.LookVector * (CONTROL.F + CONTROL.B)) + ((camera.CFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - camera.CFrame.p)) * SPEED
                    lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and (CONTROL.Q + CONTROL.E) == 0 and SPEED ~= 0 then
                    BV.Velocity = ((camera.CFrame.LookVector * (lCONTROL.F + lCONTROL.B)) + ((camera.CFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - camera.CFrame.p)) * SPEED
                else
                   BV.Velocity = Vector3.new(0, 0, 0)
                end
                BG.CFrame = camera.CFrame
            until not FLYING
            
            CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
            lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
            SPEED = 0
            
            if BG then BG:Destroy() end
            if BV then BV:Destroy() end

            if humanoid and char.Parent then 
                humanoid.PlatformStand = false 
            end
        end)
    end

    flyKeyDown = UIS.InputBegan:Connect(function(input, processed)
        if processed then return end
        
        if input.KeyCode == Enum.KeyCode.W then
            CONTROL.F = FlySpeed
        elseif input.KeyCode == Enum.KeyCode.S then
            CONTROL.B = -FlySpeed
        elseif input.KeyCode == Enum.KeyCode.A then
            CONTROL.L = -FlySpeed
        elseif input.KeyCode == Enum.KeyCode.D then
            CONTROL.R = FlySpeed
        elseif input.KeyCode == Enum.KeyCode.E and QEfly then
            CONTROL.Q = FlySpeed * 2
        elseif input.KeyCode == Enum.KeyCode.Q and QEfly then
            CONTROL.E = -FlySpeed * 2
        end
    end)

    flyKeyUp = UIS.InputEnded:Connect(function(input, processed)
        if processed then return end
        
        if input.KeyCode == Enum.KeyCode.W then
            CONTROL.F = 0
        elseif input.KeyCode == Enum.KeyCode.S then
            CONTROL.B = 0
        elseif input.KeyCode == Enum.KeyCode.A then
            CONTROL.L = 0
        elseif input.KeyCode == Enum.KeyCode.D then
            CONTROL.R = 0
        elseif input.KeyCode == Enum.KeyCode.E then
            CONTROL.Q = 0
        elseif input.KeyCode == Enum.KeyCode.Q then
            CONTROL.E = 0
        end
    end)
    
    FLY()
end

local function NOFLY()
    FLYING = false
    if flyKeyDown then 
        flyKeyDown:Disconnect() 
        flyKeyDown = nil
    end
    if flyKeyUp then 
        flyKeyUp:Disconnect() 
        flyKeyUp = nil
    end
    
    if player.Character and player.Character:FindFirstChildOfClass('Humanoid') then
        player.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
    end
end

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–µ—Ç–∞
local function ToggleFly()
    if FLYING then
        NOFLY()
        Rayfield:Notify({
            Title = "–ü–æ–ª–µ—Ç",
            Content = "–ü–æ–ª–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω",
            Duration = 3,
            Image = 4483362458,
        })
    else
        sFLY()
        if FLYING then
            Rayfield:Notify({
                Title = "–ü–æ–ª–µ—Ç",
                Content = "–ü–æ–ª–µ—Ç –≤–∫–ª—é—á–µ–Ω!",
                Duration = 3,
                Image = 4483362458,
            })
        else
            Rayfield:Notify({
                Title = "–û—à–∏–±–∫–∞",
                Content = "–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ—Ç!",
                Duration = 3,
                Image = 4483362458,
            })
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –Ω–æ—É–∫–ª–∏–ø–∞
local NoclipConnection
local function ToggleNoclip()
    Noclip = not Noclip
    
    if Noclip then
        NoclipConnection = RunService.Stepped:Connect(function()
            if not Noclip then return end
            if player.Character then
                for _, part in ipairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
        Rayfield:Notify({
            Title = "–ù–æ–∫–ª–∏–ø",
            Content = "–ù–æ–∫–ª–∏–ø –≤–∫–ª—é—á–µ–Ω",
            Duration = 3,
            Image = 4483362458,
        })
    else
        if NoclipConnection then
            NoclipConnection:Disconnect()
            NoclipConnection = nil
        end
        if player.Character then
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
        Rayfield:Notify({
            Title = "–ù–æ–∫–ª–∏–ø",
            Content = "–ù–æ–∫–ª–∏–ø –≤—ã–∫–ª—é—á–µ–Ω",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–≥–Ω–æ—Ä–∞
local function IsPlayerIgnored(playerName)
    for _, ignoredName in ipairs(IgnoredPlayers) do
        if string.lower(ignoredName) == string.lower(playerName) then
            return true
        end
    end
    return false
end

-- –§–ª–∏–Ω–≥ –∏–≥—Ä–æ–∫–∞
local function FlingPlayer(targetPlayer)
    if not targetPlayer or targetPlayer == player or not targetPlayer.Character then
        return
    end
    
    local targetRoot = getRoot(targetPlayer.Character)
    if not targetRoot then return end
    
    if lastFlingTime[targetPlayer] and tick() - lastFlingTime[targetPlayer] < 1 then
        return
    end
    
    lastFlingTime[targetPlayer] = tick()
    
    local flingPower = 50000
    
    for _, v in ipairs(targetRoot:GetChildren()) do
        if v:IsA("BodyVelocity") or v:IsA("BodyAngularVelocity") then
            v:Destroy()
        end
    end
    
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.Velocity = Vector3.new(
        math.random(-flingPower, flingPower),
        math.random(flingPower, flingPower * 1.5),
        math.random(-flingPower, flingPower)
    )
    bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
    bodyVelocity.Parent = targetRoot
    
    local bodyAngularVelocity = Instance.new("BodyAngularVelocity")
    bodyAngularVelocity.AngularVelocity = Vector3.new(
        math.random(-100000, 100000),
        math.random(-100000, 100000),
        math.random(-100000, 100000)
    )
    bodyAngularVelocity.MaxTorque = Vector3.new(100000, 100000, 100000)
    bodyAngularVelocity.Parent = targetRoot
    
    game:GetService("Debris"):AddItem(bodyVelocity, 0.5)
    game:GetService("Debris"):AddItem(bodyAngularVelocity, 0.5)
end

-- –§–ª–∏–Ω–≥ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
local function FlingAllPlayers()
    if isFlinging then 
        Rayfield:Notify({
            Title = "–û—à–∏–±–∫–∞",
            Content = "–§–ª–∏–Ω–≥ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!",
            Duration = 3,
            Image = 4483362458,
        })
        return 
    end
    
    if not player.Character then 
        Rayfield:Notify({
            Title = "–û—à–∏–±–∫–∞",
            Content = "–ù–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞!",
            Duration = 3,
            Image = 4483362458,
        })
        return 
    end
    
    local rootPart = getRoot(player.Character)
    if not rootPart then 
        Rayfield:Notify({
            Title = "–û—à–∏–±–∫–∞",
            Content = "–ù–µ–º–∞ –∫–æ—Ä–Ω—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞!",
            Duration = 3,
            Image = 4483362458,
        })
        return 
    end
    
    isFlinging = true
    
    Rayfield:Notify({
        Title = "FLING",
        Content = "–§–ª–∏–Ω–≥–∞–Ω—ë–º –∫–∞ –≤—Å–µ—Ö!",
        Duration = 3,
        Image = 4483362458,
    })
    
    spawn(function()
        local wasNoclip = Noclip
        local wasFlying = FLYING
        
        if not Noclip then
            ToggleNoclip()
        end
        
        if not FLYING then
            ToggleFly()
        end
        
        wait(0.5)
        
        local playersToFling = {}
        for _, targetPlayer in ipairs(Players:GetPlayers()) do
            if targetPlayer ~= player and not IsPlayerIgnored(targetPlayer.Name) and targetPlayer.Character then
                table.insert(playersToFling, targetPlayer)
            end
        end
        
        for i, targetPlayer in ipairs(playersToFling) do
            if not targetPlayer.Character then continue end
            
            local targetRoot = getRoot(targetPlayer.Character)
            if not targetRoot then continue end
            
            local targetPos = targetRoot.Position
            rootPart.CFrame = CFrame.new(targetPos + Vector3.new(0, 3, 0))
            
            FlingPlayer(targetPlayer)
            
            wait(0.2)
        end
        
        if originalFlingPosition then
            rootPart.CFrame = originalFlingPosition
        end
        
        if not wasFlying then
            ToggleFly()
        end
        
        if not wasNoclip then
            ToggleNoclip()
        end
        
        isFlinging = false
        
        Rayfield:Notify({
            Title = "FLING",
            Content = "–Ø –ø–µ—Ä–µ—Å—Ç–∞–ª —Ñ–ª–∏–Ω–≥–æ–≤–∞—Ç—å üòä!",
            Duration = 3,
            Image = 4483362458,
        })
    end)
end

-- –°–∏—Å—Ç–µ–º–∞ Fly Fling
local function ToggleFlyFling()
    flyFlingEnabled = not flyFlingEnabled
    
    if flyFlingEnabled then
        if not FLYING then
            ToggleFly()
        end
        if not Noclip then
            ToggleNoclip()
        end
        
        flyFlingConnection = RunService.Heartbeat:Connect(function()
            if not flyFlingEnabled or not player.Character then return end
            
            local character = player.Character
            local myRoot = getRoot(character)
            if not myRoot then return end
            
            for _, targetPlayer in ipairs(Players:GetPlayers()) do
                if targetPlayer ~= player and not IsPlayerIgnored(targetPlayer.Name) and targetPlayer.Character then
                    local targetRoot = getRoot(targetPlayer.Character)
                    if targetRoot then
                        local distance = (myRoot.Position - targetRoot.Position).Magnitude
                        if distance < 10 then
                            FlingPlayer(targetPlayer)
                        end
                    end
                end
            end
        end)
        
        Rayfield:Notify({
            Title = "Fly Fling",
            Content = "Fly Fling –≤–∫–ª—é—á–µ–Ω!",
            Duration = 3,
            Image = 4483362458,
        })
    else
        if flyFlingConnection then
            flyFlingConnection:Disconnect()
            flyFlingConnection = nil
        end
        
        Rayfield:Notify({
            Title = "Fly Fling",
            Content = "Fly Fling –≤—ã–∫–ª—é—á–µ–Ω",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- –°–∏—Å—Ç–µ–º–∞ Walk Fling
local function ToggleWalkFling()
    walkFlingEnabled = not walkFlingEnabled
    
    if walkFlingEnabled then
        walkFlingConnection = RunService.Heartbeat:Connect(function()
            if not walkFlingEnabled or not player.Character then return end
            
            local character = player.Character
            local myRoot = getRoot(character)
            if not myRoot then return end
            
            myRoot.RotVelocity = Vector3.new(0, 50, 0)
            
            for _, targetPlayer in ipairs(Players:GetPlayers()) do
                if targetPlayer ~= player and not IsPlayerIgnored(targetPlayer.Name) and targetPlayer.Character then
                    local targetRoot = getRoot(targetPlayer.Character)
                    if targetRoot then
                        local distance = (myRoot.Position - targetRoot.Position).Magnitude
                        if distance < 8 then
                            FlingPlayer(targetPlayer)
                        end
                    end
                end
            end
        end)
        
        Rayfield:Notify({
            Title = "Walk Fling",
            Content = "Walk Fling –≤–∫–ª—é—á–µ–Ω!",
            Duration = 3,
            Image = 4483362458,
        })
    else
        if walkFlingConnection then
            walkFlingConnection:Disconnect()
            walkFlingConnection = nil
        end
        
        if player.Character then
            local myRoot = getRoot(player.Character)
            if myRoot then
                myRoot.RotVelocity = Vector3.new(0, 0, 0)
            end
        end
        
        Rayfield:Notify({
            Title = "Walk Fling",
            Content = "Walk Fling –≤—ã–∫–ª—é—á–µ–Ω",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ GUI —Å Rayfield

-- –í–∫–ª–∞–¥–∫–∞ "–û—Å–Ω–æ–≤–Ω—ã–µ"
local MainSection = MainTab:CreateSection("–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏")

local FlingButton = MainTab:CreateButton({
    Name = "Fling –≤—Å–µ—Ö",
    Callback = function()
        FlingAllPlayers()
    end,
})

local ResetButton = MainTab:CreateButton({
    Name = "Reset",
    Callback = function()
        ResetCharacter()
    end,
})

local LeaveButton = MainTab:CreateButton({
    Name = "Leave",
    Callback = function()
        LeaveGame()
    end,
})

local FlyFlingToggle = MainTab:CreateToggle({
    Name = "Fly Fling",
    CurrentValue = false,
    Flag = "FlyFlingToggle",
    Callback = function(Value)
        if Value then
            ToggleFlyFling()
        else
            ToggleFlyFling()
        end
    end,
})

local WalkFlingToggle = MainTab:CreateToggle({
    Name = "Walk Fling",
    CurrentValue = false,
    Flag = "WalkFlingToggle",
    Callback = function(Value)
        if Value then
            ToggleWalkFling()
        else
            ToggleWalkFling()
        end
    end,
})

-- –í–∫–ª–∞–¥–∫–∞ "–ò–≥—Ä–æ–∫"
local PlayerSection = PlayerTab:CreateSection("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä–æ–∫–∞")

local FlyToggle = PlayerTab:CreateToggle({
    Name = "Fly",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = function(Value)
        if Value then
            ToggleFly()
        else
            ToggleFly()
        end
    end,
})

local NoclipToggle = PlayerTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        if Value then
            ToggleNoclip()
        else
            ToggleNoclip()
        end
    end,
})

local AntiAFKToggle = PlayerTab:CreateToggle({
    Name = "Anti-Afk",
    CurrentValue = false,
    Flag = "AntiAFKToggle",
    Callback = function(Value)
        if Value then
            ToggleAntiAFK()
        else
            ToggleAntiAFK()
        end
    end,
})

local FlySpeedSlider = PlayerTab:CreateSlider({
    Name = "–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞",
    Range = {1, 10},
    Increment = 1,
    Suffix = "x",
    CurrentValue = 1,
    Flag = "FlySpeedSlider",
    Callback = function(Value)
        FlySpeed = Value
    end,
})

local WalkSpeedSlider = PlayerTab:CreateSlider({
    Name = "WalkSpeed",
    Range = {0, 200},
    Increment = 5,
    Suffix = "studs",
    CurrentValue = 16,
    Flag = "WalkSpeedSlider",
    Callback = function(Value)
        currentWalkSpeed = Value
        updateWalkSpeed()
    end,
})

local JumpPowerSlider = PlayerTab:CreateSlider({
    Name = "JumpPower",
    Range = {0, 200},
    Increment = 5,
    Suffix = "power",
    CurrentValue = 50,
    Flag = "JumpPowerSlider",
    Callback = function(Value)
        currentJumpPower = Value
        updateJumpPower()
    end,
})

-- –í–∫–ª–∞–¥–∫–∞ "–¢–µ–ª–µ–ø–æ—Ä—Ç"
local TeleportSection = TeleportTab:CreateSection("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è")

local TPForwardButton = TeleportTab:CreateButton({
    Name = "–¢–µ–ª–µ–ø–æ—Ä—Ç –≤–ø–µ—Ä–µ–¥",
    Callback = function()
        TPForward()
    end,
})

-- –°–æ–∑–¥–∞–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
local playerDropdown = TeleportTab:CreateDropdown({
    Name = "–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞",
    Options = {},
    CurrentOption = "",
    Flag = "PlayerDropdown",
    Callback = function(Option)
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr.Name == Option or plr.DisplayName == Option then
                selectedPlayerForTP = plr
                break
            end
        end
    end,
})

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ dropdown
local function UpdatePlayerDropdown()
    local playerOptions = {}
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then
            table.insert(playerOptions, plr.Name)
        end
    end
    playerDropdown:Set(playerOptions)
end

local TPToPlayerButton = TeleportTab:CreateButton({
    Name = "–¢–µ–ª–µ–ø–æ—Ä—Ç –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –∏–≥—Ä–æ–∫—É",
    Callback = function()
        TPToPlayer(selectedPlayerForTP)
    end,
})

-- –í–∫–ª–∞–¥–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
local SettingsSection = SettingsTab:CreateSection("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞")

local ServerHopButton = SettingsTab:CreateButton({
    Name = "–°–º–µ–Ω–∏—Ç—å —Å–µ—Ä–≤–µ—Ä",
    Callback = function()
        ServerHop()
    end,
})

-- –ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç
local IgnoreSection = SettingsTab:CreateSection("–ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç")

local IgnoreInput = SettingsTab:CreateInput({
    Name = "–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–≥–Ω–æ—Ä-–ª–∏—Å—Ç",
    PlaceholderText = "–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –∏–≥—Ä–æ–∫–∞",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        if Text ~= "" then
            local alreadyExists = false
            for _, name in ipairs(IgnoredPlayers) do
                if string.lower(name) == string.lower(Text) then
                    alreadyExists = true
                    break
                end
            end
            
            if not alreadyExists then
                table.insert(IgnoredPlayers, Text)
                Rayfield:Notify({
                    Title = "–ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç",
                    Content = "–î–æ–±–∞–≤–ª–µ–Ω –≤ –∏–≥–Ω–æ—Ä: " .. Text,
                    Duration = 3,
                    Image = 4483362458,
                })
            else
                Rayfield:Notify({
                    Title = "–ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç",
                    Content = "–£–∂–µ –≤ –∏–≥–Ω–æ—Ä-–ª–∏—Å—Ç–µ: " .. Text,
                    Duration = 3,
                    Image = 4483362458,
                })
            end
        end
    end,
})

local ClearIgnoreButton = SettingsTab:CreateButton({
    Name = "–û—á–∏—Å—Ç–∏—Ç—å –∏–≥–Ω–æ—Ä-–ª–∏—Å—Ç",
    Callback = function()
        IgnoredPlayers = {}
        Rayfield:Notify({
            Title = "–ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç",
            Content = "–ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç –æ—á–∏—â–µ–Ω!",
            Duration = 3,
            Image = 4483362458,
        })
    end,
})

-- –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
spawn(function()
    wait(1)
    if player.Character then
        local humanoid = getHumanoid(player.Character)
        if humanoid then
            currentWalkSpeed = humanoid.WalkSpeed
            originalWalkSpeed = currentWalkSpeed
            WalkSpeedSlider:Set(currentWalkSpeed)
            
            currentJumpPower = humanoid.JumpPower
            originalJumpPower = currentJumpPower
            JumpPowerSlider:Set(currentJumpPower)
            
            updateWalkSpeed()
        end
    end
    UpdatePlayerDropdown()
end)

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ—Å–ø–∞–≤–Ω–µ
player.CharacterAdded:Connect(function(character)
    wait(0.5)
    
    local humanoid = getHumanoid(character)
    if humanoid then
        currentWalkSpeed = humanoid.WalkSpeed
        originalWalkSpeed = currentWalkSpeed
        WalkSpeedSlider:Set(currentWalkSpeed)
        
        currentJumpPower = humanoid.JumpPower
        originalJumpPower = currentJumpPower
        JumpPowerSlider:Set(currentJumpPower)
    end
    
    if Noclip then
        ToggleNoclip()
        wait(0.1)
        ToggleNoclip()
    end
    
    if FLYING then
        ToggleFly()
        wait(0.1)
        ToggleFly()
    end
    
    if flyFlingEnabled then
        ToggleFlyFling()
        wait(0.1)
        ToggleFlyFling()
    end
    
    if walkFlingEnabled then
        ToggleWalkFling()
        wait(0.1)
        ToggleWalkFling()
    end
    
    if antiAFKEnabled then
        ToggleAntiAFK()
        wait(0.1)
        ToggleAntiAFK()
    end
    
    updateWalkSpeed()
    updateJumpPower()
end)

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
Players.PlayerAdded:Connect(UpdatePlayerDropdown)
Players.PlayerRemoving:Connect(UpdatePlayerDropdown)

Rayfield:Notify({
    Title = "–ó–∞–ø—É—Å–∫",
    Content = "–ù—É –≤—Ä–æ–¥–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ",
    Duration = 6,
    Image = 4483362458,
})
